webpackJsonp([1],{"+92l":function(t,e){},"4+hh":function(t,e){},"4A+e":function(t,e){},"80Hq":function(t,e){},"9M+g":function(t,e){},"D+67":function(t,e){},EF23:function(t,e){},H9fh:function(t,e){},Jmt5:function(t,e){},MLbV:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),a=n("Tqaz"),s=n("//Fk"),o=n.n(s),l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bck"},[e("img",{attrs:{src:n("kVcK")}})])}]};var r=n("VU/8")({name:"BackGround"},l,!1,function(t){n("H9fh")},null,null).exports,c=n("mtWM"),u=n.n(c),d={name:"StartLogin",data:function(){return{active:!0,pwdFormVisible:!1,id_User:"",formPwd:{password:"",newPassword:"",confNewPassword:""},user:{password:""},form:{name:"",is_admin:"",email:"",password:"",count:0},id:"",formLabelWidth:"120px"}},methods:{onConnect:function(t){var e=this;u.a.post("http://localhost:3000/user/authenticate",this.form).then(function(t){if(console.log("buzz",t.data),"error"===t.data.status)e.$message({message:"Verifier votre identifiant ou mot de passe",type:"warning"});else if("success"===t.data.status){e.dialogFormVisible=!1,0===t.data.data.user.count&&(e.pwdFormVisible=!0);var n=t.data.data.token,i=t.data.data.user.is_admin;localStorage.setItem("token",n),localStorage.setItem("is_admin",i),e.$router.push({name:"ClientList"}),e.active=!1}}).catch(function(t){"error"===t&&alert("pas bon")})},onCancel:function(){this.$message({message:"Saisir vos credentiels.",type:"warning"})},onValid:function(t){var e=this;this.formPwd.password!==this.form.password?alert("mauvais password"):this.formPwd.newPassword===this.form.password?alert("password déja utilisé"):this.formPwd.newPassword!==this.formPwd.confNewPassword&&alert("verifier la confirmation du mot de passe"),this.user.password=this.formPwd.newPassword;for(var n=1;n<=1;n++)this.form.count=this.form.count+1;this.user.count=this.form.count,u.a.put("http://localhost:3000/user/"+this.id,this.user).then(function(t){e.pwdFormVisible=!1}).catch(function(t){e.errors.push(t)})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.active?n("div",{staticClass:"chgt"},[n("el-dialog",{attrs:{title:"changement de mot de passe",visible:t.pwdFormVisible,width:"60%"},on:{"update:visible":function(e){t.pwdFormVisible=e}}},[n("el-form",{attrs:{model:t.formPwd}},[n("el-form-item",{attrs:{label:"password","label-width":t.formLabelWidth}},[n("div",{staticClass:"input"},[n("el-input",{attrs:{type:"password",placeholder:"Veuillez saisir votre mot de passe",autocomplete:"off"},model:{value:t.formPwd.password,callback:function(e){t.$set(t.formPwd,"password",e)},expression:"formPwd.password"}})],1)]),t._v(" "),n("el-form-item",{attrs:{label:"Nouveau Password","label-width":t.formLabelWidth}},[n("el-input",{attrs:{type:"password",placeholder:"Saisir le nouveau mot de passe"},model:{value:t.formPwd.newPassword,callback:function(e){t.$set(t.formPwd,"newPassword",e)},expression:"formPwd.newPassword"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"confirmer Password","label-width":t.formLabelWidth}},[n("el-input",{attrs:{type:"password",placeholder:"confirmer le nouveau mot de passe"},model:{value:t.formPwd.confNewPassword,callback:function(e){t.$set(t.formPwd,"confNewPassword",e)},expression:"formPwd.confNewPassword"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.pwdFormVisible=!1}}},[t._v("Annuler")]),t._v(" "),n("el-button",{attrs:{type:"submit",variant:"primary"},on:{click:t.onValid}},[t._v("Valider")])],1)],1),t._v(" "),n("md-dialog-title",{staticStyle:{}},[t._v("connexion à l'application")]),t._v(" "),n("md-field",[n("label",[t._v("e-Mail")]),t._v(" "),n("md-input",{attrs:{type:"string",maxlength:"30"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("md-field",[n("label",[t._v("Password")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("div",{staticClass:"align"},[n("md-button",{staticClass:"md-raised md-primary",on:{click:t.onConnect}},[t._v("Ok")]),t._v(" "),n("md-button",{staticClass:"md-raised md-accent",on:{click:t.onCancel}},[t._v("Annulé")])],1)],1):t._e()},staticRenderFns:[]};var p=n("VU/8")(d,m,!1,function(t){n("kQH4")},null,null).exports,h={data:function(){return{active:!0,visibleToken:localStorage.getItem("token")}},components:{BackGround:r,StartLogin:p},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push("/")})}},created:function(t){this.$http.interceptors.response.use(void 0,function(e){return new o.a(function(n,i){throw 401===e.status&&e.config&&!e.config.__isRetryRequest&&this.$store.dispatch(t),e})})}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"800px"},attrs:{id:"app"}},[n("md-dialog",{attrs:{"md-active":t.active},on:{"update:mdActive":function(e){t.active=e},"update:md-active":function(e){t.active=e}}},[t.visibleToken?t._e():n("StartLogin"),t._v(" "),n("router-view"),t._v(" "),n("BackGround")],1)],1)},staticRenderFns:[]};var f=n("VU/8")(h,v,!1,function(t){n("ecZr")},null,null).exports,_=n("/ocq"),b={name:"Menu",data:function(){return{is_admin:localStorage.getItem("is_admin")||""}},methods:{logout:function(){localStorage.removeItem("token"),this.$router.push({name:"/"})}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal","background-color":"#c3d3d0","text-color":"#d74314","active-text-color":"#246b08"}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[t._v("Accueil")]),t._v(" "),n("el-menu-item",{attrs:{index:"1-1"}},[n("b-link",{attrs:{href:"/accueil"}},[t._v("Accueil")])],1),t._v(" "),n("el-menu-item",{attrs:{index:"1-2"}},[n("b-link",{attrs:{href:"/"}},[n("a",{on:{click:t.logout}},[t._v("Deconnexion")])])],1)],2),t._v(" "),"true"===t.is_admin?n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[t._v("gestion des users")]),t._v(" "),n("el-menu-item",{attrs:{index:"2-1"}},[n("b-link",{attrs:{href:"/list_users"}},[t._v("liste des utilisateurs")])],1),t._v(" "),n("el-menu-item",{attrs:{index:"2-2"}},[n("b-link",{attrs:{href:"/register"}},[t._v("Nouvel utilisateur")])],1)],2):t._e(),t._v(" "),n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[t._v("Clients")]),t._v(" "),n("el-menu-item",{attrs:{index:"3-1"}},[n("b-link",{attrs:{href:"/clientList"}},[t._v("Liste clients")])],1)],2),t._v(" "),n("el-menu-item",{attrs:{index:"4"}},[n("b-link",{attrs:{href:"/about"}},[n("a",[t._v("?")])])],1)],1)],1)},staticRenderFns:[]},g=n("VU/8")(b,w,!1,null,null,null).exports,C={components:{Menu:g}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Menu"),this._v(" "),e("div",{staticClass:"Title"},[this._v("\n    Application de test: requêtes REST (CRUD)\n  ")])],1)},staticRenderFns:[]};var k=n("VU/8")(C,$,!1,function(t){n("4A+e")},null,null).exports,x={data:function(){return{visibleToken:localStorage.getItem("token"),active:!0,clients:[],errors:[],pathos:[],name:localStorage.getItem("name")||"",is_admin:localStorage.getItem("is_admin")||""}},components:{Menu:g},created:function(){var t=this;console.log("tok",this.visibleToken),u.a.get("http://localhost:3000/client").then(function(e){t.clients=e.data,console.log("client",t.clients)}).catch(function(e){t.errors.push(e)})},methods:{onNewClient:function(){this.$router.push("add-client")},alertDisplay:function(){this.$swal("Heading","this is a Heading","OK")},handleDetail:function(t,e){this.$router.push({name:"Compte",params:{id:e._id}})},handleEdit:function(t,e){this.$router.push({name:"EditClient",params:{id:e._id}})},logout:function(){var t=this;this.$store.dispatch("logout").then(function(){t.$router.push("/")})},deleteClient:function(t,e,n){var i=this;i.$swal.fire({title:"Etes vous sûr ?",text:"Vous ne pourrez plus accéder",icon:"warning",showCancelButton:!0,showLoaderOnConfirm:!0,confirmButtonText:"Oui, supprimer !",cancelButtonText:"Non, annuler !",cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",preConfirm:function(){return new o.a(function(n,a){u.a.delete("http://localhost:3000/client/"+e._id),setTimeout(function(){n()},4e3),i.clients.splice(t,1),i.$swal.fire("Suppression effectuée !","L'utilisateur a été supprimé définitivement.","success")})}})}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"ClientList"}},[n("Menu"),t._v(" "),t._m(0),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"buttonNouveauClient"},[n("el-button",{attrs:{type:"primary"},on:{click:t.onNewClient}},[t._v("Nouveau client")])],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.clients,height:"230",border:""}},[n("el-table-column",{attrs:{label:"Nom",width:"100",prop:"nom",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"Prénom",prop:"prenom",width:"120",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"Adresse",prop:"adresse",width:"300"}}),t._v(" "),"true"===t.is_admin?n("el-table-column",{attrs:{label:"Opérations",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleDetail(e.$index,e.row)}}},[t._v("\n              Détail\n            ")]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("\n              Editer\n            ")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return t.deleteClient(e.$index,e.row)}}})]}}],null,!1,3266258414)}):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sizeTitle1"},[e("span",[this._v("Liste clients")])])}]};var N=n("VU/8")(x,y,!1,function(t){n("80Hq")},null,null).exports,L={name:"ShowClient",data:function(){return{client:[]}},created:function(){var t=this;u.a.get("http://localhost:3000/client/"+this.$route.params.id).then(function(e){t.client=e.data}).catch(function(e){t.errors.push(e)})},methods:{editclient:function(t){this.$router.push({name:"EditClient",params:{id:t}})},deleteclient:function(t){var e=this;u.a.delete("http://localhost:3000/client/"+t).then(function(t){e.$router.push({name:"ClientList"})}).catch(function(t){e.errors.push(t)})}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("h2",[t._v("\n      Edition client\n      "),n("b-link",{attrs:{href:"#/"}},[t._v("(Liste clients)")])],1),t._v(" "),n("b-jumbotron",[n("template",{slot:"lead"},[t._v("\n        Numéro client: "+t._s(t.client.numClient)),n("br"),t._v("\n        Nom: "+t._s(t.client.nom)),n("br"),t._v("\n        Prénom: "+t._s(t.client.prenom)),n("br"),t._v("\n        H/F: "+t._s(t.client.genre)),n("br"),t._v("\n        adresse: "+t._s(t.client.adresse)),n("br"),t._v("\n        Date de naissance: "+t._s(t.client.dateNaissance)),n("br")]),t._v(" "),n("hr",{staticClass:"my-4"}),t._v(" "),n("b-btn",{attrs:{variant:"success"},on:{click:function(e){return e.stopPropagation(),t.editclient(t.client._id)}}},[t._v("Edit")]),t._v(" "),n("b-btn",{attrs:{variant:"danger"},on:{click:function(e){return e.stopPropagation(),t.deleteclient(t.client._id)}}},[t._v("Delete")])],2)],1)],1)},staticRenderFns:[]};var E=n("VU/8")(L,S,!1,function(t){n("k1Hh")},null,null).exports,V=n("ESwS"),F=n.n(V),D=n("+cKO"),P={name:"CreateClient",data:function(){return{mixins:[V.validationMixin],userSaved:!1,sending:!1,lastUser:null,active:!0,client:{nom:null,prenom:null,adresse:null,telephone:null,email:null},value:"",options:[]}},validations:{client:{nom:{required:D.required},prenom:{required:D.required},adresse:{required:D.required},telephone:{required:D.required},email:{required:D.required,email:D.email}}},created:function(){var t=this;u.a.get("http://localhost:3000/typecpt/").then(function(e){t.options=e.data}).catch(function(e){t.errors.push(e)})},methods:{getValidationClass:function(t){var e=this.$v.client[t];if(e)return{"md-invalid":e.$invalid&&e.$dirty}},clearForm:function(){this.$v.$reset(),this.client.nom=null,this.client.prenom=null,this.client.adresse=null,this.client.telephone=null,this.client.email=null},onCancel:function(){this.active=!1,this.$router.push({name:"ClientList"})},saveUser:function(){var t=this;this.sending=!0,this.client.nom=this.client.nom.toUpperCase(),this.dialogFormVisible=!1,window.setTimeout(function(){t.lastUser=t.client.nom+" "+t.client.prenom,t.userSaved=!0,t.sending=!1,t.clearForm()},1500)},validateUser:function(){var t=this;this.$v.$touch(),this.$v.$invalid||(this.saveUser(),u.a.post("http://localhost:3000/client",this.client).then(function(e){t.$router.push({name:"ClientList"})}).catch(function(e){t.errors.push(e)}))}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"diagGlobal"},[n("md-dialog",{attrs:{"md-active":t.active},on:{"update:mdActive":function(e){t.active=e},"update:md-active":function(e){t.active=e}}},[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("Identité du client")])]),t._v(" "),n("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.validateUser(e)}}},[n("md-card-content",[n("md-field",{class:t.getValidationClass("nom")},[n("label",{attrs:{for:"nom"}},[t._v("Nom")]),t._v(" "),n("md-input",{attrs:{name:"nom",id:"nom",disabled:t.sending},model:{value:t.client.nom,callback:function(e){t.$set(t.client,"nom",e)},expression:"client.nom"}}),t._v(" "),t.$v.client.nom.required?t._e():n("span",{staticClass:"md-error"},[t._v("Le nom est requis")])],1),t._v(" "),n("md-field",{class:t.getValidationClass("prenom")},[n("label",{attrs:{for:"prenom"}},[t._v("Prenom")]),t._v(" "),n("md-input",{attrs:{name:"prenom",id:"prenom",disabled:t.sending},model:{value:t.client.prenom,callback:function(e){t.$set(t.client,"prenom",e)},expression:"client.prenom"}}),t._v(" "),t.$v.client.prenom.required?t._e():n("span",{staticClass:"md-error"},[t._v("Le nom est requis")])],1),t._v(" "),n("md-field",{class:t.getValidationClass("adresse")},[n("label",[t._v("Adresse")]),t._v(" "),n("md-textarea",{attrs:{name:"adresse",id:"adresse",disabled:t.sending},model:{value:t.client.adresse,callback:function(e){t.$set(t.client,"adresse",e)},expression:"client.adresse"}}),t._v(" "),t.$v.client.adresse.required?t._e():n("span",{staticClass:"md-error"},[t._v("L'adresse est requis")])],1),t._v(" "),n("md-field",{class:t.getValidationClass("telephone")},[n("label",{attrs:{for:"telephone"}},[t._v("Numéro de téléphone")]),t._v(" "),n("md-input",{attrs:{name:"telephone",id:"telephone",disabled:t.sending},model:{value:t.client.telephone,callback:function(e){t.$set(t.client,"telephone",e)},expression:"client.telephone"}}),t._v(" "),t.$v.client.telephone.required?t._e():n("span",{staticClass:"md-error"},[t._v("Le numero est requis")])],1),t._v(" "),n("md-field",{class:t.getValidationClass("email")},[n("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),n("md-input",{attrs:{type:"email",name:"email",id:"email",autocomplete:"email",disabled:t.sending},model:{value:t.client.email,callback:function(e){t.$set(t.client,"email",e)},expression:"client.email"}}),t._v(" "),t.$v.client.email.required?t._e():n("span",{staticClass:"md-error"},[t._v("The email is required")])],1),t._v(" "),n("div",{staticClass:"align"},[n("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit",disabled:t.sending}},[t._v("Ok")]),t._v(" "),n("md-button",{staticClass:"md-raised md-accent",on:{click:t.onCancel}},[t._v("Annulé")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var A=n("VU/8")(P,U,!1,function(t){n("qj5+")},null,null).exports,q={name:"Editclient",data:function(){return{formLabelWidth:"120px",dialogFormVisible:!0,dialogCompteVisible:!0,client:{}}},created:function(){var t=this;u.a.get("http://localhost:3000/client/"+this.$route.params.id).then(function(e){t.client=e.data}).catch(function(e){t.errors.push(e)})},methods:{cancel:function(){this.$router.push({name:"ClientList"})},onAdd:function(){this.$router.push({name:"ModalComptes",params:{id:this.client._id}})},onSubmit:function(t){var e=this;t.preventDefault(),u.a.put("http://localhost:3000/client/"+this.$route.params.id,this.client).then(function(t){e.$router.push({name:"ClientList"})}).catch(function(t){e.errors.push(t)})}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{attrs:{model:t.client}},[n("el-form-item",{attrs:{label:"Nom","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.client.nom,callback:function(e){t.$set(t.client,"nom",e)},expression:"client.nom"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Prénom","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.client.prenom,callback:function(e){t.$set(t.client,"prenom",e)},expression:"client.prenom"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Adresse","label-width":t.formLabelWidth}},[n("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.client.adresse,callback:function(e){t.$set(t.client,"adresse",e)},expression:"client.adresse"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Numéro","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.client.telephone,callback:function(e){t.$set(t.client,"telephone",e)},expression:"client.telephone"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"e-Mail","label-width":t.formLabelWidth}},[n("el-input",{model:{value:t.client.email,callback:function(e){t.$set(t.client,"email",e)},expression:"client.email"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger"},on:{click:t.cancel}},[t._v("Annuler")]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:t.onSubmit}},[t._v("Confirmer")]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:t.onAdd}},[t._v("Ajouter des comptesr")])],1)],1)},staticRenderFns:[]};var I=n("VU/8")(q,T,!1,function(t){n("EF23")},null,null).exports,M=n("NYxO");i.default.use(M.a);var R={GET_CPT:function(t,e){var n=e.typeCpt;t.typeCpt=n,console.log("store",n)}},z={LOAD_CPT:function(t){var e=t.commit;u.a.get("http://localhost:3000/typecpt/").then(function(t){e("GET_CPT",{typeCpt:t.data})})}},O=new M.a.Store({state:{typeCpt:[]},mutations:R,getters:{typeCpt:function(t){return t.typeCpt}},actions:z}),W={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"?"},[e("h1",[this._v("Edité par Ph Boudet")]),this._v(" "),e("h1",[this._v("Le 01/05/2020")]),this._v(" "),e("h1",[this._v("VUEJS-MongoDb-express-Element-UI")])])}]},B=n("VU/8")(null,W,!1,null,null,null).exports,H={data:function(){return{is_admin:localStorage.getItem("is_admin")||"",passwordConf:"",active:!0,form:{name:"",email:"",password:"",is_admin:!1,count:0}}},methods:{onSubmit:function(t){var e=this;this.passwordConf!==this.form.password?alert("Vérifier la confirmation des mots de passe"):(this.dialogFormVisible=!1,t.preventDefault(),u.a.post("http://localhost:3000/user/register",this.form).then(function(t){e.form.is_admin="",e.form.email="",e.form.password="",e.$router.push({name:"UserList",params:{id:t.data._id}})}).catch(function(t){e.errors.push(t)}))},onCancel:function(){this.active=!1,this.$router.push({name:"UserList"})}}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-dialog",{attrs:{"md-active":t.active},on:{"update:mdActive":function(e){t.active=e},"update:md-active":function(e){t.active=e}}},[n("md-dialog-title",[t._v("Propriétés utilisateur")]),t._v(" "),n("md-field",[n("label",[t._v("Nom")]),t._v(" "),n("md-input",{attrs:{maxlength:"50",type:"string"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("md-field",[n("label",[t._v("e-Mail")]),t._v(" "),n("md-input",{attrs:{type:"string",maxlength:"30"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),n("md-field",[n("label",[t._v("Password")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("md-field",[n("label",[t._v("confirm password")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.passwordConf,callback:function(e){t.passwordConf=e},expression:"passwordConf"}})],1),t._v(" "),n("md-field",[n("md-switch",{staticClass:"md-primary",model:{value:t.form.is_admin,callback:function(e){t.$set(t.form,"is_admin",e)},expression:"form.is_admin"}},[t._v("Administrateur")])],1),t._v(" "),n("div",{staticClass:"align"},[n("md-button",{staticClass:"md-raised md-primary",on:{click:t.onSubmit}},[t._v("Ok")]),t._v(" "),n("md-button",{staticClass:"md-raised md-accent",on:{click:t.onCancel}},[t._v("Annulé")])],1)],1)],1)},staticRenderFns:[]};var G=n("VU/8")(H,j,!1,function(t){n("MLbV")},null,null).exports,K={name:"UserList",data:function(){return{is_admin:localStorage.getItem("is_admin")||"",user:[]}},components:{Menu:g},created:function(){var t=this;u.a.get("http://localhost:3000/user/").then(function(e){t.user=e.data}).catch(function(e){t.errors.push(e)})},methods:{handleEdit:function(t,e){this.$router.push({name:"EditUsers",params:{id:e._id}})},deleteUser:function(t,e,n){var i=this;i.$swal.fire({title:"Etes vous sûr ?",text:"Vous ne pourrez plus accéder",icon:"warning",showCancelButton:!0,showLoaderOnConfirm:!0,confirmButtonText:"Oui, supprimer !",cancelButtonText:"Non, annuler !",cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",preConfirm:function(){return new o.a(function(n,a){u.a.delete("http://localhost:3000/user/"+e._id),setTimeout(function(){n()},4e3),i.user.splice(t,1),i.$swal.fire("Suppression effectuée !","L'utilisateur a été supprimé définitivement.","success")})}})},onNewClient:function(){this.$router.push("register")}}},J={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"userList"}},[n("Menu"),t._v(" "),n("h2",[t._v("\n  Liste de utilisateurs\n  "),n("b-link",{attrs:{href:"/"}})],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"buttonNouveauUser"},[n("el-button",{attrs:{type:"primary"},on:{click:t.onNewClient}},[t._v("Nouvel utilisateur")])],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("el-table",{staticStyle:{width:"80%"},attrs:{data:t.user}},[n("el-table-column",{attrs:{label:"Nom",width:"180",prop:"name",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"email",prop:"email",width:"180",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"Opérations"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("Editer")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return t.deleteUser(e.$index,e.row)}}})]}}])})],1)],1)},staticRenderFns:[]};var Q=n("VU/8")(K,J,!1,function(t){n("D+67")},null,null).exports,Z={name:"EditUsers",data:function(){return{formLabelWidth:"120px",dialogFormVisible:!0,user:{},emailStorage:localStorage.getItem("email")||""}},created:function(){var t=this;u.a.get("http://localhost:3000/user/"+this.$route.params.id).then(function(e){t.user=e.data}).catch(function(e){t.errors.push(e)})},methods:{cancel:function(){this.$router.push({name:"UserList"})},onSubmit:function(t){var e=this;if(t.preventDefault(),this.emailStorage===this.user.email)return alert("utilisateur connecté, impossible de le modifier!");u.a.put("http://localhost:3000/user/"+this.$route.params.id,this.user).then(function(t){e.$router.push({name:"UserList"})}).catch(function(t){e.errors.push(t)})}}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"propriété utilisateur",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.user}},[n("el-form-item",{attrs:{label:"Nom","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"e-Mail","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Administrateur","label-width":t.formLabelWidth}},[n("el-switch",{model:{value:t.user.is_admin,callback:function(e){t.$set(t.user,"is_admin",e)},expression:"user.is_admin"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancel}},[t._v("Annuler")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Confirmer")])],1)],1)},staticRenderFns:[]},X=n("VU/8")(Z,Y,!1,null,null,null).exports,tt={data:function(){return{active:!0,client:[],detail:[],clients:{},cptClient:[],userId:"",numcpt:""}},created:function(){var t=this;u.a.get("http://localhost:3000/client/"+this.$route.params.id).then(function(e){t.client=e.data,t.userId=e.data._id,u.a.get("http://localhost:3000/cptclient/",{params:{userId:t.userId}}).then(function(e){t.cptClient=e.data}).catch(function(e){t.errors.push(e)})}).catch(function(e){t.errors.push(e)})},components:{Menu:g},methods:{handleEdit:function(t,e){this.$router.push({name:"DetailsCpt",params:{id:this.userId,numcpt:e.numcpt,idcpt:e._id}})},onSubmit:function(t){var e=this;t.preventDefault(),u.a.put("http://localhost:3000/client/"+this.$route.params.id,this.client).then(function(t){e.$router.push({name:"ClientList"})}).catch(function(t){e.errors.push(t)})},onCancel:function(){this.active=!1,this.$router.push({name:"ClientList"})}}},et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Menu"),t._v(" "),n("md-dialog",{attrs:{"md-active":t.active},on:{"update:mdActive":function(e){t.active=e},"update:md-active":function(e){t.active=e}}},[n("md-dialog-title",[t._v("Comptes client")]),t._v(" "),n("md-field",[n("label",[t._v("Nom")]),t._v(" "),n("md-input",{attrs:{readonly:"",type:"string"},model:{value:t.client.nom,callback:function(e){t.$set(t.client,"nom",e)},expression:"client.nom"}})],1),t._v(" "),n("md-field",[n("label",[t._v("Prenom")]),t._v(" "),n("md-input",{attrs:{readonly:"",type:"string"},model:{value:t.client.prenom,callback:function(e){t.$set(t.client,"prenom",e)},expression:"client.prenom"}})],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cptClient,height:"300",border:""}},[n("el-table-column",{attrs:{label:"Compte",width:"250",prop:"typecpt",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{label:"N° de compte",width:"300",prop:"numcpt"}}),t._v(" "),n("el-table-column",{attrs:{label:"Solde",width:"150","cell-style":"green",prop:"solde"}}),t._v(" "),n("el-table-column",{attrs:{label:"Opérations",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v("\n            Editer\n          ")])]}}])})],1),t._v(" "),n("div",[n("el-checkbox-group",{model:{value:t.clients,callback:function(e){t.clients=e},expression:"clients"}},t._l(t.clients,function(e){return n("el-checkbox-button",{key:e,attrs:{label:t.compte}},[t._v(t._s(e))])}),1)],1),t._v(" "),n("div",{staticClass:"align"},[n("md-button",{staticClass:"md-raised md-primary",on:{click:t.onSubmit}},[t._v("Ok")]),t._v(" "),n("md-button",{staticClass:"md-raised md-accent",on:{click:t.onCancel}},[t._v("Annulé")])],1)],1)],1)},staticRenderFns:[]};var nt=n("VU/8")(tt,et,!1,function(t){n("+92l")},null,null).exports,it={data:function(){return{visibleDeb:!1,active:!0,client:{},detailcpt:{debit:"",credit:""},value1:"",value2:"",options1:[],options2:[]}},created:function(){var t=this;console.log("idc",this.$route.params.idcpt),u.a.get("http://localhost:3000/natdep/").then(function(e){t.options1=e.data}).catch(function(e){t.errors.push(e)}),u.a.get("http://localhost:3000/natcre/").then(function(e){t.options2=e.data}).catch(function(e){t.errors.push(e)})},computed:{total:{get:function(){return""===this.detailcpt.debit&&""===this.detailcpt.credit?Number(this.client.solde):""!==this.detailcpt.debit?Number(this.client.solde)-Number(this.detailcpt.debit):Number(this.client.solde)+Number(this.detailcpt.credit)},set:function(t){this.solde=t}}},methods:{handclickDebit:function(){this.visibleDeb=!0},onSubmit:function(t){var e=this;t.preventDefault(),this.detailcpt.user_id=this.$route.params.id,this.detailcpt.numcpt=this.$route.params.numcpt,""!==this.value1?(this.detailcpt.nature=this.value1,u.a.post("http://localhost:3000/detailcpt/",this.detailcpt).then(function(t){}).catch(function(t){e.errors.push(t)})):(""!==this.value2&&(this.detailcpt.nature=this.value2),u.a.post("http://localhost:3000/detailcptcredit/",this.detailcpt).then(function(t){}).catch(function(t){e.errors.push(t)})),this.active=!1,this.$router.push({name:"DetailsCpt",params:{idcpt:this.$route.params.idcpt,id:this.$route.params.id,numcpt:this.$route.params.numcpt,soldeplus:this.detailcpt.credit,soldemoins:this.detailcpt.debit}})},onCancel:function(){this.active=!1,this.$router.push({name:"DetailsCpt",params:{id:this.$route.params.id,idcpt:this.$route.params.idcpt}})}}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleDeb=!0,expression:"visibleDeb=true"}],staticClass:"text"},[t._v("Choisir d'abord la nature du débit ou crédit")]),t._v(" "),n("md-field",[n("label",[t._v("Débit")]),t._v(" "),n("span",{staticClass:"md-prefix"},[t._v("€")]),t._v(" "),n("md-input",{directives:[{name:"show",rawName:"v-show",value:""!=t.value1,expression:"value1!=''"}],attrs:{type:"string"},on:{select:t.handclickDebit},model:{value:t.detailcpt.debit,callback:function(e){t.$set(t.detailcpt,"debit",e)},expression:"detailcpt.debit"}})],1),t._v(" "),n("md-field",[n("label",[t._v("Crédit")]),t._v(" "),n("span",{staticClass:"md-prefix"},[t._v("€")]),t._v(" "),n("md-input",{directives:[{name:"show",rawName:"v-show",value:""!=t.value2,expression:"value2!=''"}],attrs:{type:"string"},model:{value:t.detailcpt.credit,callback:function(e){t.$set(t.detailcpt,"credit",e)},expression:"detailcpt.credit"}})],1),t._v(" "),n("div",{staticClass:"md-layout md-gutter"},[n("div",{staticClass:"md-layout-item"},[n("span",[t._v("Nature débit et crédit")]),t._v(" "),n("md-field",[n("el-select",{attrs:{placeholder:"Nature débit"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.options1,function(t){return n("el-option",{key:t.type,attrs:{value:t.type}})}),1),t._v(" "),n("el-select",{attrs:{placeholder:"Nature crédit"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options2,function(t){return n("el-option",{key:t.type,attrs:{value:t.type}})}),1)],1)],1)]),t._v(" "),n("div",{staticClass:"align"},[n("md-button",{staticClass:"md-raised md-primary",on:{click:t.onSubmit}},[t._v("Ok")]),t._v(" "),n("md-button",{staticClass:"md-raised md-accent",on:{click:t.onCancel}},[t._v("Annulé")])],1)],1)},staticRenderFns:[]};var st=n("VU/8")(it,at,!1,function(t){n("a2Ta")},null,null).exports,ot={name:"ModalComptes",data:function(){return{formLabelWidth:"120px",dialogFormVisible:!0,client:[],cptForm:{solde:"",numcpt:""},typeCpt:[],value:""}},created:function(){var t=this;console.log("id",this.$route.params.id),u.a.get("http://localhost:3000/typecpt").then(function(e){t.typeCpt=e.data}).catch(function(e){t.errors.push(e)})},methods:{onAdd:function(){this.cptForm.user_id=this.$route.params.id,this.cptForm.typecpt=this.value,u.a.post("http://localhost:3000/cptclient/",this.cptForm),this.$router.push({name:"ClientList"})}}},lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"Type de comptes"}},[n("el-select",{attrs:{placeholder:"Type de compte"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.typeCpt,function(t){return n("el-option",{key:t.type,attrs:{value:t.type}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"Solde"}},[n("el-input",{model:{value:t.cptForm.solde,callback:function(e){t.$set(t.cptForm,"solde",e)},expression:"cptForm.solde"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"N° compte"}},[n("el-input",{attrs:{width:"150"},model:{value:t.cptForm.numcpt,callback:function(e){t.$set(t.cptForm,"numcpt",e)},expression:"cptForm.numcpt"}})],1),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:t.onAdd}},[t._v("Ajouter le compte")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.client}},[n("el-table-column",{attrs:{fixed:"",prop:"numcpt",label:"N° de compte",width:"400"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"compte",label:"Type de compte",width:"400"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"",prop:"solde",label:"Solde",width:"100"}})],1)],1)},staticRenderFns:[]};var rt=n("VU/8")(ot,lt,!1,function(t){n("UKGz")},"data-v-56e51d6b",null).exports,ct={data:function(){return{client:{},numcpt:"",totC:"",totD:"",tot:"",details:[],detailsC:[],dialogTableVisible:!0}},created:function(){var t=this;this.numcpt=this.$route.params.numcpt,this.idcpt=this.$route.params.idcpt,console.log("idcptDetail",this.idcpt),u.a.get("http://localhost:3000/detailcpt/",{params:{userId:this.$route.params.id,numcpt:this.$route.params.numcpt}}).then(function(e){t.details=e.data}).catch(function(e){t.errors.push(e)}),u.a.get("http://localhost:3000/detailcptcredit/",{params:{userId:this.$route.params.id,numcpt:this.$route.params.numcpt}}).then(function(e){t.detailsC=e.data}).catch(function(e){t.errors.push(e)})},methods:{onCancel:function(){var t=this;this.client.solde=this.tot,u.a.put("http://localhost:3000/cptclient/"+this.idcpt,this.client).then(function(e){console.log(e),t.dialogTableVisible=!1,t.$router.push({name:"Compte"})}).catch(function(e){t.errors.push(e)})},getSummariesC:function(t){var e=this,n=t.columns,i=t.data,a=[];return n.forEach(function(t,n){if(0!==n){var s=i.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?a[n]="N/A":(a[1]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),e.totC=Number(a[1]),null===e.totD&&(e.tot=e.totC),e.tot=e.totC-e.totD)}else a[n]="Total crédit"}),a},getSummariesD:function(t){var e=this,n=t.columns,i=t.data,a=[];return n.forEach(function(t,n){if(0!==n){var s=i.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})?a[n]="N/A":(a[1]=s.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:t+e},0),e.totD=Number(a[1]),null===e.totD&&(e.tot=e.totC),null===e.totC&&(e.tot=e.totD),e.tot=e.totC-e.totD)}else a[n]="Total débit"}),a},onAdd:function(){this.$router.push({name:"Depenses",params:{idcpt:this.idcpt,id:this.$route.params.id,numcpt:this.$route.params.numcpt,totD:this.totD,totC:this.totC}})}}},ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",[t._v("Compte N°: "+t._s(this.numcpt))]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",[n("el-button",{attrs:{type:"success"},on:{click:t.onAdd}},[t._v("Ajouter une opération")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:t.onCancel}},[t._v("Retour au comptes")]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"align"},[this.tot<0?n("div",{staticClass:"dec"},[n("span",[t._v("Compte à decouvert")])]):t._e(),t._v(" "),n("span",{staticClass:"demo-input-label"},[t._v("Solde du compte")]),t._v(" "),n("el-input",{staticClass:"tot",model:{value:this.tot,callback:function(e){t.$set(this,"tot",e)},expression:"this.tot"}})],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detailsC,"summary-method":t.getSummariesC,"show-summary":"",height:"200"}},[n("el-table-column",{attrs:{prop:"nature",label:"nature",width:"250"}}),t._v(" "),n("el-table-column",{attrs:{prop:"credit",label:"Crédit",width:"180"}})],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.details,"summary-method":t.getSummariesD,"show-summary":"",height:"200"}},[n("el-table-column",{attrs:{prop:"nature",label:"nature",width:"250"}}),t._v(" "),n("el-table-column",{directives:[{name:"show",rawName:"v-show",value:null!=t.details.debit,expression:"details.debit!=null"}],attrs:{prop:"debit",label:"Débit",width:"180"}})],1)],1)},staticRenderFns:[]};var dt=n("VU/8")(ct,ut,!1,function(t){n("qMoF")},"data-v-1ae172d7",null).exports;i.default.use(_.a);var mt=new _.a({mode:"history",routes:[{path:"/accueil",name:"Accueil",component:k},{path:"/startLogin",name:"startLogin",component:p},{path:"/register",name:"register",component:G},{path:"/about",name:"about",component:B},{path:"/clientList",name:"ClientList",component:N},{path:"/show-client/:id",name:"ShowClient",component:E},{path:"/list_users",name:"UserList",component:Q},{path:"/add-client",name:"CreateClient",component:A},{path:"/edit-client/:id",name:"EditClient",component:I},{path:"/edit-users/:id",name:"EditUsers",component:X},{path:"/menu",name:"Menu",component:g},{path:"/compte/:id",name:"Compte",component:nt},{path:"/depense/:id",name:"Depenses",component:st},{path:"/tscomptes/:id",name:"ModalComptes",component:rt},{path:"/detailscpt/:id",name:"DetailsCpt",component:dt}]});mt.beforeEach(function(t,e,n){if(t.matched.some(function(t){return t.meta.requiresAuth})){if(O.getters.isLoggedIn)return void n();n("/")}else n()});var pt=mt,ht=(n("Jmt5"),n("9M+g"),n("Lgyv")),vt=n.n(ht),ft=(n("4+hh"),n("giDI"),n("zL8q")),_t=n.n(ft),bt=(n("tvR6"),n("SjQo")),wt=n.n(bt),gt=n("hz7P");n("UdIB");i.default.prototype.$http=u.a;var Ct=localStorage.getItem("user-token");Ct&&(i.default.prototype.$http.defaults.headers.common.Authorization=Ct),i.default.config.productionTip=!1,i.default.use(a.a),i.default.use(vt.a),i.default.use(_t.a),i.default.use(_t.a,{locale:wt.a}),i.default.use(gt.a),i.default.use(M.a),i.default.use(F.a),new i.default({el:"#app",router:pt,store:O,validations:{},components:{App:f},template:"<App/>"})},UKGz:function(t,e){},UdIB:function(t,e){},a2Ta:function(t,e){},ecZr:function(t,e){},giDI:function(t,e){},k1Hh:function(t,e){},kQH4:function(t,e){},kVcK:function(t,e,n){t.exports=n.p+"static/img/euroOr.f49bcdb.png"},qMoF:function(t,e){},"qj5+":function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.cda59becca079c4019f1.js.map